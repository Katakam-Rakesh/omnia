# Copyright 2025 Dell Inc. or its subsidiaries. All Rights Reserved.
#
#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.
---

# Usage: main.yml
provision_shared_library_path: "/opt/omnia/shared_libraries/provision"
xcat_root_env: "/opt/xcat"
xcat_path_env: "/opt/xcat/bin:/opt/xcat/sbin:/opt/xcat/share/xcat/tools"
xcat_manpath_env: "/opt/xcat/share/man:$MANPATH"
perl_badlang_env: 0
xcat_path: /opt/xcat/bin

# Usage: validate_passwordless_ssh_oim.yml
oim_ssh_port: 22
ssh_connection_fail_msg: "Failed. SSH connection failed. Please verify passwordless ssh from omnia_core to oim host."

# Usage: pre_requisite.yml
software_config_file: "{{ input_project_dir }}/software_config.json"
invalid_software_config_fail_msg: "Failed. Please provide valid software_config.json file with cluster_os_type, cluster_os_version, repo_config
and repo_config values."
software_config_syntax_fail_msg: "Failed. Syntax errors present in software_config.json. Fix errors and re-run playbook again."

supported_k8s_version:
  "v2.26.0": [v1.30.4, v1.30.3, v1.30.2, v1.30.1, v1.30.0, v1.29.7, v1.29.6, v1.29.5, v1.29.4, v1.29.3, v1.29.2, v1.29.1, v1.29.0, v1.28.12, v1.28.11, v1.28.10, v1.28.9, v1.28.8, v1.28.7, v1.28.6, v1.28.5, v1.28.4, v1.28.3, v1.28.2, v1.28.1, v1.28.0] # noqa: yaml[line-length]
  "v2.27.0": [v1.31.4, v1.31.3, v1.31.2, v1.31.1, v1.31.0, v1.30.8, v1.30.7, v1.30.6, v1.30.5, v1.30.4, v1.30.3, v1.30.2, v1.30.1, v1.30.0, v1.29.12, v1.29.11, v1.29.10, v1.29.9, v1.29.8, v1.29.7, v1.29.6, v1.29.5, v1.29.4, v1.29.3, v1.29.2, v1.29.1, v1.29.0] # noqa: yaml[line-length]
  "v2.28.0": [1.32.5, 1.32.4, 1.32.2, 1.32.3, 1.32.1, 1.32.0, 1.31.9, 1.31.8, 1.31.7, 1.31.6, 1.31.5, 1.31.4, 1.31.3, 1.31.2, 1.31.1, 1.31.0, 1.30.13, 1.30.12, 1.30.11, 1.30.10, 1.30.9, 1.30.8, 1.30.7, 1.30.6, 1.30.5, 1.30.4, 1.30.3, 1.30.2, 1.30.1, 1.30.0] # noqa: yaml[line-length]

dynamic_k8s_json_folder: "/opt/omnia/k8s_dynamic_json"
dynamic_k8s_json_file: "{{ dynamic_k8s_json_folder }}/v{{ k8s_version }}/k8s_v{{ k8s_version }}.json"
base_k8s_json_file: "{{ project_input_path }}/config/{{ cluster_os_type }}/{{ cluster_os_version }}/k8s.json"
kubespray_url: "https://github.com/kubernetes-sigs/kubespray.git"
package_type_list: ["rpm", "deb", "tarball", "image", "manifest", "pip_module", "git"]
dynamic_k8s_json_log_dir: "/opt/omnia/log/local_repo"
base_k8s_json_bkp_file: "{{ dynamic_k8s_json_folder }}/k8s_bkp.json"
dynamic_k8s_generation: false
file_permission: "0755"

success_msg_k8s_version: "Kubernetes Version Validated"
fail_msg_k8s_version: "Failed. Kubernetes Version is unsupported or incorrect in software_config.json. Supported versions are - {{ supported_k8s_version }}" # noqa: yaml[line-length]
kube_version_on_unsupported_os: "Failed. On RHEL 9.6 OS, supported kubernetes version is 1.29.5"  # noqa: yaml[line-length]
failed_k8s_version_msg: "Stopping execution. Please update software_config.json with a supported Kubernetes versions and re-run the playbook." # noqa: yaml[line-length]
# Usage: validate_network_spec.yml
network_spec: "{{ input_project_dir }}/network_spec.yml"
network_spec_syntax_fail_msg: "Failed. Syntax errors present in network_spec.yml. Fix errors and re-run playbook again."
admin_nic_fail_msg: "NIC '{{ admin_nic }}' does not exist on the system. Provide valid admin_network details in network_spec.yml and re-run the playbook."
admin_nic_success_msg: "NIC '{{ admin_nic }}' exists on the system."
admin_nic_ip_fail_msg: "IP '{{ admin_nic_ip }}' is not assigned to NIC '{{ admin_nic }}'. Please configure the admin IP in OIM and re-run the playbook."
admin_nic_ip_success_msg: "IP '{{ admin_nic_ip }}' is assigned to NIC '{{ admin_nic }}'."

# Usage: validate_credentials.yml
min_length: 8
max_length: 30
pulp_creds_fail_msg:
  Both Pulp username and password are required.
  Kindly check the pulp_password in input/omnia_config_credentials.yml.

pulp_pwd_min_length: 5
pulp_password_fail_msg: "Failed. pulp_password should have minimum 5 characters in omnia_config_credentials.yml"

# Usage: include_local_repo_config.yml
fail_msg_local_repo_config_file: "local_repo_config.yml file doesn't exist."
input_project_dir: "{{ hostvars['localhost']['input_project_dir'] }}"
local_repo_config_file: "{{ input_project_dir }}/local_repo_config.yml"
local_repo_config_syntax_fail_msg: "Failed. Syntax errors present in local_repo_config.yml. Fix errors and re-run playbook again."

# Usage: include_high_availability_config.yml
omnia_metadata_file: "/opt/omnia/.data/oim_metadata.yml"
high_availability_config_path: "{{ hostvars['localhost']['input_project_dir'] }}/high_availability_config.yml"
high_availability_config_syntax_fail_msg: "Failed. Syntax errors present in high_availability_config.yml. Fix errors and re-run playbook again."
nfs_not_configured: "When enabling OIM HA or Service Node HA an NFS external server must be configured.
  Please run the OIM cleanup in utils and re-run the Omnia startup script using the NFS(external) option."
ha_nfs_error_msg: |
  ERROR: Internal NFS is not supported with HA OIM or Service HA.
  Please configure External NFS for HA capabilities.
# Usage: check_service_role.yml
roles_config_path: "{{ input_project_dir }}/roles_config.yml"
roles_config_syntax_fail_msg: "Failed. Syntax errors present in role_config.yml. Fix errors and re-run playbook again."
