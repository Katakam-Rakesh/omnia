[Unit]
Description=Pacemaker-Corosync HA Container for Podman-in-Podman

[Container]
ContainerName=omnia_pcs
Image=omnia_pcs:latest
Volume=/etc/localtime:/etc/localtime:ro
Volume=/run/podman/podman.sock:/run/podman/podman.sock:ro
Volume={{ oim_shared_path }}/omnia/ssh_config/.ssh/:/root/.ssh/
Volume={{ oim_shared_path }}/omnia/service_nodes/{{ node_info.service_tag }}/pcs-start.sh:/opt/omnia/pcs/pcs-start.sh
Volume={{ oim_shared_path }}/omnia/service_nodes/{{ node_info.service_tag }}/corosync.conf:/etc/corosync/corosync.conf
Volume={{ oim_shared_path }}/omnia/log/pcs:/var/log/cluster
Volume={{ oim_shared_path }}/omnia:/opt/omnia
Network=host
PodmanArgs=--privileged

[Service]
Restart=always

[Install]
WantedBy=multi-user.target default.target
