#  Copyright 2025 Dell Inc. or its subsidiaries. All Rights Reserved.
#
#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.
---

# Usage: create_podman_secrets.yml
mysql_root_password: "mysql_root_password"
mysql_user_password: "mysql_user_password"
mysql_user: "mysql_user"
mysql_secrets:
  - { name: "{{ mysql_root_password }}", value: "{{ hostvars['localhost']['mysqldb_root_password'] }}" }
  - { name: "{{ mysql_user_password }}", value: "{{ hostvars['localhost']['mysqldb_password'] }}" }
  - { name: "{{ mysql_user }}", value: "{{ hostvars['localhost']['mysqldb_user'] }}" }

# Usage: create_podman_volume.yml
dir_permissions_755: "0755"
oim_shared_path: "{{ hostvars['localhost']['oim_shared_path'] }}"
omnia_nfs_share: "{{ oim_shared_path }}/omnia"
telemetry_data_dir: "{{ omnia_nfs_share }}/service_nodes/{{ hostvars[inventory_hostname]['service_tag'] }}/telemetry"
telemetry_log_dir: "{{ omnia_nfs_share }}/service_nodes/{{ hostvars[inventory_hostname]['service_tag'] }}/log/telemetry"
idrac_telemetry_dir: "{{ telemetry_data_dir }}/idrac_telemetry"

# mysql
mysql_data_dir: "{{ idrac_telemetry_dir }}/mysqldb"
mysql_log_dir: "{{ telemetry_log_dir }}/mysqldb"
mysqldb_podman_volumes:
  - { name: "mysqldb_data", path: "{{ mysql_data_dir }}" }
  - { name: "mysqldb_log", path: "{{ mysql_log_dir }}" }

# activemq
activemq_log_dir: "{{ telemetry_log_dir }}/activemq"
activemq_podman_volumes:
  - { name: "activemq_log", path: "{{ activemq_log_dir }}" }

# idrac_telemetry_receiver
idrac_telemetry_receiver_log_dir: "{{ telemetry_log_dir }}/idrac_telemetry_receiver"
idrac_telemetry_receiver_podman_volumes:
  - { name: "idrac_telemetry_receiver_log", path: "{{ idrac_telemetry_receiver_log_dir }}" }

# prometheus
prometheus_log_dir: "{{ telemetry_log_dir }}/prometheus"
prometheus_data_dir: "{{ telemetry_data_dir }}/prometheus/prometheus_data"
prometheus_podman_volumes:
  - { name: "prometheus_data", path: "{{ prometheus_data_dir }}" }
  - { name: "prometheus_log", path: "{{ prometheus_log_dir }}" }

# Usage: pull_podman_images.yml
omnia_images_tar: "{{ omnia_nfs_share }}/images/omnia_images.tar"
load_images_fail_msg: |
  "Failed to load the telemetry images from the tar file {{ omnia_images_tar }}.
  Ensure the tar file is present in the shared folder by running prepare_oim.yml and re-run telemetry.yml again."

# Usage: render_telemetry_template.yml
service_node_base_dir: "/opt/omnia/service_nodes"
file_permissions: '0755'

# Usage: pcs_container_deployment.yml
pcs_container_name: omnia_pcs