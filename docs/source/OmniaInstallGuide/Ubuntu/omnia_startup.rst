Step 1: Deploy the Omnia container
===================================

The ``omnia_startup.sh`` is a one-stop script which deploys Omnia as a container on the Omnia Infrastructure Manager (OIM). A container is an isolated unit that packages an application and its dependencies, ensuring it runs consistently across any environment.
The Omnia container ensures smooth cluster deployments, independent of the host environment. The deployment includes:

 * Downloading the container image
 * Setting up required mounts
 * Configuring secure SSH access with public-private key pairs

Prerequisites
---------------

* The OIM must be connected to the internet in order to download the required packages for cluster deployment and configuration.
* The OIM should have two NICs in active state. One of them is used to connect to the public network whereas the other one is used to communicate within the cluster.
* Ensure that either Podman container engine is installed on your OIM.
* Ensure that the OIM hostname prerequisites are met. Here's a list of guidelines to follow while setting up the hostname:

    .. include:: ../../Appendices/hostnamereqs.rst

Tasks performed by the ``omnia_startup.sh`` script
-----------------------------------------------------

The ``omnia_startup.sh`` script performs the following tasks:

	* The script prompts you to provide the path for the Omnia shared path, which can be a NFS share path or even a local filepath.

	* Sets up the Omnia root password: The script prompts you to provide a combination of alphanumeric characters, which will be used as password to facilitate direct access to the Omnia container.
	.. caution:: Do not use [],\,|,&,;,`,<>,*,?!,$,(),{},[]] characters in your password.

	* The script generates SSH key pair and stores them in the ``/root/.ssh`` folder for both OIM and the containers.
	.. caution:: Do not delete any key pairs generated by Omnia, from the ``/root/.ssh``, as this leads to Omnia execution failure.

	* Initiates the container engine: The script initiates the Podman container engine present on the OIM.

	* Creates an input folder containing all the playbook inputs files and the software configs.

	* The script checks if Podman is installed and initiates the Podman socket. Further, it pulls the Omnia container image from the Dell registry and starts the ``omnia-core`` container.

	* Once the script execution is complete, a success message along with the next steps is displayed.

Execute the ``omnia_startup.sh`` script
-----------------------------------------

After you have cloned the Omnia repository to your OIM, navigate to the cloned directory and execute the ``omnia_startup.sh`` script located inside. Use the below command:
::
    sh omnia_startup.sh